@model ClassAssignements_Day4.Models.StudentDetails
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Student Details Form</h2>

<form id="studentForm">
    <div class="form-group mt-3">
        <label>Name:</label>
        <input type="text" id="Name" name="Name" class="form-control" />
    </div>
    <div class="form-group mt-3">
        <label>Email:</label>
        <input type="text" id="Email" name="Email" class="form-control" />
    </div>
    <div class="form-group mt-3">
        <label>Address:</label>
        <input type="text" id="Address" name="Address" class="form-control" />
    </div>
    <div class="mt-3"">
        <input type="submit" value="Submit" class="btn btn-primary" />
    </div>
</form>

@section scripts {

    <script>
        $(function () {
            $('#studentForm').submit(function (event) {
                event.preventDefault();
                var formData = $(this).serialize();

                $.ajax({
                    type: 'POST',
                    url: '@Url.Action("Save", "StudentDetails")',
                    data: formData,
                    success: function (response) {
                        console.log(response);
//                        var id = response.Id
  //                      var name = response.Name
    //                    var email = response.Email
      //                  var address = response.Address
                        var url = '@Url.Action("DisplayDetails", "StudentDetails")';
                        url += '?id=' + response.Id + '&name=' + encodeURIComponent(response.Name) + '&email=' + encodeURIComponent(response.Email) + '&address=' + encodeURIComponent(response.Address);

                        window.location.href = url;
                    },
                    error: function () {
                        alert('Error submitting form!');
                    }
                });
            });
        });
    </script>
}
